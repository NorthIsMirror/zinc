# vim: ft=zsh ts=2 sw=2 et fenc=utf-8

function p10ks_battery () {
  (( ${p10ks_battery[verbose]} )) && {
    if [[ -n ${p10ks_battery[time_remaining]} ]]; then
      REPLY="${p10ks_battery[percent]}%% (${p10ks_battery[time_remaining]})"
    else
      REPLY="${p10ks_battery[percent]}%%"
    fi
  } || {
    REPLY="${p10ks_battery[percent]}%%"
  }
}

typeset -gA p10ks_battery
p10ks_battery[percent]=""
p10ks_battery[verbose]="${p10ks_battery[verbose]:-1}"

p10ks_battery "$@"
